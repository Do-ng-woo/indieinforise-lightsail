<style>
.card-container {
    display: flex;
    flex-direction: column;
    text-align: left; /* 컨테이너 내 텍스트 왼쪽 정렬 */
    border-radius: 1rem;
    overflow: visible;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    background-color:#ffffff;
    max-width: 250px;
    min-height: 510px; /* 고정 높이 제거, 컨텐츠에 따라 높이 조정 */
    position: relative;
    z-index: 1;
    transition: max-height 0.5s ease; /* 부드러운 높이 변화 효과를 위한 전환 설정 */
}

.card-image {
    width: 250px; /* 이미지 너비를 250px로 설정 */
    height: 315px; /* 이미지 높이를 315px로 설정 */
    object-fit: cover; /* 이미지 비율을 유지하면서, 주어진 영역을 완전히 채움 */
    border-top-left-radius: 1rem;
    border-top-right-radius: 1rem;
    transition: transform 0.5s ease;
}

/* .card-image:hover { */
    /* transform: scale(1.2); 이미지에 직접 호버했을 때 확대 */
    /* width: auto; 호버 시 이미지의 원본 너비로 설정 */
    /* max-width: none; 최대 너비 제한을 해제하여 이미지가 원본 크기로 확대될 수 있도록 함 */
    /* position: relative; z-index가 제대로 작동하려면 position이 필요 */
}


.card-title {
    width: 100%;
    padding: 10px;
    font-weight: bold;
    color: #333;
    font-size: 1rem;
    text-align: left; /* 왼쪽 정렬 */
    box-sizing: border-box;
    overflow: visible;
    word-wrap: break-word;
    margin-top: 0; /* 상단 마진 제거하여 타이틀과 이미지 사이 간격 최소화 */
}
 .card-place, .card-date {
    width: 100%;
    padding-left:10px;
    font-weight: bold;
    color: #333;
    font-size: 1rem;
    text-align: left; /* 왼쪽 정렬 */
    box-sizing: border-box;
    overflow: visible;
    word-wrap: break-word;
    margin-top: 0; /* 상단 마진 제거하여 타이틀과 이미지 사이 간격 최소화 */
}

/* 기존 스타일 유지 */
.box-shadow {
  background-color: #f5f5f5; /* 회색 배경 */
  padding: 10px; /* 패딩 */
  border-radius: 5px; /* 둥근 모서리 */
  box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* 그림자 효과 */
}
/* 카드 링크에 대한 새로운 스타일 */
.card-link {
    color: #000;
    text-decoration: none;
    display: inline-block; /* 또는 필요에 따라 */
    /* 추가적인 스타일링 */
}
.artist-card-list {
    overflow: ; /* 또는 'hidden' 사용 */
    max-height: 50px; /* 필요에 따라 조절 */
}
.card-place a, .card-date a {
    display: inline-block; /* 또는 'inline-block' */
    margin: 0;
    padding: 0;
    /* 필요한 경우 다른 스타일 속성 추가 */
}
.lineup-container {
    display: flex;
    justify-content: space-between; /* 내용을 양 끝으로 분산 */
    align-items: center; /* 세로 중앙 정렬 */
}
.lineup {
  display: flex;
  flex-wrap: wrap;
  gap: 10px; /* 아티스트 간의 간격 */
  align-items: flex-start;
  margin-left: 5px;
  max-height:5rem; /* 두 줄의 높이 (line-height * 2) */
  overflow: hidden;
  flex: 1 0 85%; /* 너비의 80% 차지 */
}

.lineup a {
  background-color: #f5f5f5;
  padding: 5px 10px;
  border-radius: 5px;
  font-size: 0.9em; /* 폰트 사이즈 조절 */
  line-height: 1.5em;
  white-space: nowrap; /* 텍스트가 넘치면 줄바꿈하지 않고 잘림 */
  overflow: hidden;
  text-overflow: ellipsis; /* 텍스트가 넘치면 말줄임표를 보여줌 */
}

.card-container:hover .lineup {
  max-height: none; /* 호버 시 모든 아티스트를 보여줌 */
}
.more-artists {
    display: none; /* 기본적으로 숨김 */
    flex: 1 0 10%; /* 나머지 너비의 20% 차지 */
    justify-content: flex-end; /* 오른쪽 정렬 */
    cursor: pointer;
    /* 필요한 스타일 추가 */
}
    
@media (max-width: 768px) {
.card-container {
        max-width: 200px;
        min-height: 460px; /* 고정 높이 제거, 컨텐츠에 따라 높이 조정 */
    }

    .card-image {
        width: 200px; /* 이미지 너비를 250px로 설정 */
        height: 260px; /* 이미지 높이를 315px로 설정 */
        object-fit: cover; /* 이미지 비율을 유지하면서, 주어진 영역을 완전히 채움 */
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
        transition: transform 0.5s ease;
    }
}
@media (max-width: 550px) {
    .card-container {
        max-width: 170px;
        min-height: 400px; /* 고정 높이 제거, 컨텐츠에 따라 높이 조정 */
    }
    .card-image {
        width: 170px; /* 이미지 너비를 250px로 설정 */
        height: 220px; /* 이미지 높이를 315px로 설정 */
        object-fit: cover; /* 이미지 비율을 유지하면서, 주어진 영역을 완전히 채움 */
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
        transition: transform 0.5s ease;
    }
    .more-artists {
        flex: 1 0 20%; /* 나머지 너비의 20% 차지 */
    }
    .lineup {
      flex: 1 0 80%; /* 너비의 80% 차지 */
    }

}
@media (max-width: 500px) {
    .card-container {
        max-width: 170px;
        min-height: 370px; /* 고정 높이 제거, 컨텐츠에 따라 높이 조정 */
    }
}
@media (max-width: 400px) {
    .card-container {
        max-width: 140px;
        min-height: 340px; /* 고정 높이 제거, 컨텐츠에 따라 높이 조정 */
    }

    .card-image {
        width: 140px; /* 이미지 너비를 250px로 설정 */
        height: 190px; /* 이미지 높이를 315px로 설정 */
        object-fit: cover; /* 이미지 비율을 유지하면서, 주어진 영역을 완전히 채움 */
        border-top-left-radius: 1rem;
        border-top-right-radius: 1rem;
        transition: transform 0.5s ease;
    }
    .card-title {
        font-size: 12px;
    }
    .card-place a {
        font-size: 11px;
    }
    .card-date a {
        font-size: 11px;
    }

}
</style>



<div class="card-container">
      <img src="{{ article.image.url }}" alt="{{ article.title }}" class="card-image">
    <div class="card-title" title="{{ article.title }}">{{ article.title | truncatechars:30}}</div>    
      <div class="card-place">
        장소:
        {% for project in article.project.all %}
           <a href="{% url 'projectapp:detail' pk=project.pk %}">{{ project }}</a>
        {% endfor %}
    </div>
      <div class="card-date">
        날짜:
    {% if article.datetime %}
        {{ article.datetime|date:"Y년 n월 j일" }}  
    {% else %}
        {{ article.date|date:"Y년 n월 j일" }}  
    {% endif %}  
    </div>
    <div class="lineup-container">
        <div class="lineup">
            {% for artist in article.artist.all %}
                <a href="{% url 'artistapp:detail' pk=artist.pk %}" >
                    {{ artist }}
                </a>
            {% endfor %}
        </div>
        <div class="more-artists material-icons">add_circle</div> <!-- 이 부분을 추가합니다 -->
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.card-container').forEach(container => {
        const lineup = container.querySelector('.lineup');
        const moreArtists = container.querySelector('.more-artists');

        // 페이지 로드 시 "+ More" 표시 여부 결정
        const checkMoreArtistsVisibility = () => {
            if (lineup.offsetHeight < lineup.scrollHeight) {
                // lineup의 실제 내용이 컨테이너를 넘어가면 "+ More" 표시
                moreArtists.style.display = 'block';
            } else {
                moreArtists.style.display = 'none';
            }
        };

        // "+ More" 표시 여부를 초기화
        checkMoreArtistsVisibility();

        // 창 크기 변경 시 "+ More" 표시 여부 재검사
        window.addEventListener('resize', checkMoreArtistsVisibility);

        // 마우스 호버 시 "+ More" 숨김
        container.addEventListener('mouseenter', () => {
            moreArtists.style.display = 'none';
        });

        // 마우스가 컨테이너를 떠날 때 "+ More" 표시 여부 다시 검사
        container.addEventListener('mouseleave', checkMoreArtistsVisibility);
    });
});
</script>

